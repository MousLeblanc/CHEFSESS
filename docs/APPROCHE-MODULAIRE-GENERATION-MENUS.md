# Approche Modulaire pour la G√©n√©ration de Menus

## üéØ Concept

Au lieu de cr√©er des recettes compl√®tes fig√©es, cr√©er un syst√®me modulaire o√π :
- **Ingr√©dient principal** (prot√©ine) : ex. cuisse de poulet
- **Sauces compatibles** : ex. sauce champignons, sauce tomate, sauce au vin
- **Accompagnements compatibles** : ex. riz, frites, l√©gumes, compote de pommes

L'IA peut ensuite **combiner** ces √©l√©ments pour cr√©er des variantes multiples autour d'un m√™me ingr√©dient principal.

---

## üìä Exemple Concret

### Ingr√©dient Principal : Cuisse de Poulet

**Jour 1** : Cuisse de poulet + Sauce champignons + Riz
**Jour 2** : Cuisse de poulet + Sauce tomate + L√©gumes
**Jour 3** : Cuisse de poulet + Compote de pommes + Frites

**R√©sultat** : 3 menus diff√©rents avec le m√™me ingr√©dient principal, permettant :
- ‚úÖ R√©duction du gaspillage
- ‚úÖ Optimisation des achats (acheter en gros)
- ‚úÖ Augmentation de la vari√©t√©
- ‚úÖ Flexibilit√© dans la planification

---

## üèóÔ∏è Architecture Propos√©e

### 1. Nouveau Mod√®le : `RecipeComponent` (Composant de Recette)

```javascript
// models/RecipeComponent.js
const recipeComponentSchema = new mongoose.Schema({
  name: { type: String, required: true }, // ex. "Cuisse de poulet"
  type: { 
    type: String, 
    enum: ['protein', 'sauce', 'accompaniment', 'garnish'],
    required: true 
  },
  
  // Cat√©gorie de l'ingr√©dient principal
  proteinCategory: { 
    type: String, 
    enum: ['volaille', 'viande', 'poisson', 'vegetarien', 'vegan'],
    required: function() { return this.type === 'protein'; }
  },
  
  // Ingr√©dients n√©cessaires
  ingredients: [{
    name: String,
    quantity: Number, // Quantit√© par portion
    unit: String
  }],
  
  // Instructions de pr√©paration
  preparationSteps: [String],
  
  // Compatibilit√©s
  compatibleWith: {
    proteins: [{ type: mongoose.Schema.Types.ObjectId, ref: 'RecipeComponent' }], // Pour sauces/accompagnements
    sauces: [{ type: mongoose.Schema.Types.ObjectId, ref: 'RecipeComponent' }], // Pour prot√©ines
    accompaniments: [{ type: mongoose.Schema.Types.ObjectId, ref: 'RecipeComponent' }] // Pour prot√©ines
  },
  
  // Restrictions et compatibilit√©s
  allergens: [{ type: String }],
  dietaryRestrictions: [{ type: String }],
  textures: [{ type: String }], // IDDSI, etc.
  
  // Informations nutritionnelles (par portion)
  nutrition: {
    calories: Number,
    proteins: Number,
    carbs: Number,
    lipids: Number,
    fibers: Number
  },
  
  // Temps de pr√©paration
  preparationTime: Number, // minutes
  cookingTime: Number, // minutes
  
  // Tags pour recherche
  tags: [String],
  
  // M√©tadonn√©es
  createdAt: { type: Date, default: Date.now },
  updatedAt: { type: Date, default: Date.now }
});
```

### 2. Mod√®le : `RecipeTemplate` (Template de Recette Combin√©e)

```javascript
// models/RecipeTemplate.js
const recipeTemplateSchema = new mongoose.Schema({
  name: { type: String, required: true }, // G√©n√©r√© automatiquement : "Cuisse de poulet + Sauce champignons + Riz"
  
  // Composants
  protein: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'RecipeComponent',
    required: true 
  },
  sauce: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'RecipeComponent' 
  }, // Optionnel
  accompaniment: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'RecipeComponent' 
  }, // Optionnel
  garnish: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'RecipeComponent' 
  }, // Optionnel
  
  // Instructions combin√©es
  combinedInstructions: [String],
  
  // Nutrition totale (somme des composants)
  totalNutrition: {
    calories: Number,
    proteins: Number,
    carbs: Number,
    lipids: Number,
    fibers: Number
  },
  
  // Restrictions combin√©es (union de toutes les restrictions)
  allergens: [{ type: String }],
  dietaryRestrictions: [{ type: String }],
  
  // Compatibilit√©
  textures: [{ type: String }],
  establishmentTypes: [{ type: String }],
  
  // G√©n√©r√© automatiquement ou manuellement
  isAutoGenerated: { type: Boolean, default: true },
  
  createdAt: { type: Date, default: Date.now }
});
```

---

## üîÑ Logique de G√©n√©ration

### Algorithme de Combinaison

```javascript
async function generateModularMenu(options) {
  const {
    numberOfPeople,
    mealType,
    dietaryRestrictions = [],
    allergens = [],
    useStockOnly = false,
    avoidProteins = [], // Pour √©viter les r√©p√©titions
    previousMenus = [] // Historique pour varier
  } = options;
  
  // 1. S√©lectionner une prot√©ine
  const protein = await selectProtein({
    restrictions: dietaryRestrictions,
    allergens,
    avoid: avoidProteins,
    useStockOnly
  });
  
  // 2. Trouver les sauces compatibles avec cette prot√©ine
  const compatibleSauces = await findCompatibleComponents({
    type: 'sauce',
    proteinId: protein._id,
    restrictions: dietaryRestrictions,
    allergens
  });
  
  // 3. Trouver les accompagnements compatibles
  const compatibleAccompaniments = await findCompatibleComponents({
    type: 'accompaniment',
    proteinId: protein._id,
    restrictions: dietaryRestrictions,
    allergens
  });
  
  // 4. S√©lectionner une combinaison optimale
  const combination = selectOptimalCombination({
    protein,
    sauces: compatibleSauces,
    accompaniments: compatibleAccompaniments,
    previousMenus, // Pour √©viter les r√©p√©titions
    stockAvailability: useStockOnly ? await getStock() : null
  });
  
  // 5. G√©n√©rer le template de recette combin√©e
  const recipeTemplate = await createRecipeTemplate({
    protein: combination.protein,
    sauce: combination.sauce,
    accompaniment: combination.accompaniment,
    numberOfPeople
  });
  
  return recipeTemplate;
}
```

### Fonction de S√©lection Optimale

```javascript
function selectOptimalCombination({ protein, sauces, accompaniments, previousMenus, stockAvailability }) {
  // Score chaque combinaison possible
  const combinations = [];
  
  for (const sauce of sauces) {
    for (const accompaniment of accompaniments) {
      const score = calculateCombinationScore({
        protein,
        sauce,
        accompaniment,
        previousMenus,
        stockAvailability
      });
      
      combinations.push({
        protein,
        sauce,
        accompaniment,
        score
      });
    }
  }
  
  // Trier par score et retourner la meilleure
  combinations.sort((a, b) => b.score - a.score);
  
  return combinations[0];
}

function calculateCombinationScore({ protein, sauce, accompaniment, previousMenus, stockAvailability }) {
  let score = 100;
  
  // P√©nalit√© si cette combinaison a d√©j√† √©t√© utilis√©e r√©cemment
  const recentCombination = previousMenus.find(menu => 
    menu.protein?._id?.toString() === protein._id.toString() &&
    menu.sauce?._id?.toString() === sauce?._id?.toString() &&
    menu.accompaniment?._id?.toString() === accompaniment?._id?.toString()
  );
  
  if (recentCombination) {
    score -= 50; // Forte p√©nalit√© pour r√©p√©tition
  }
  
  // Bonus si tous les ingr√©dients sont en stock
  if (stockAvailability) {
    const allInStock = checkAllIngredientsInStock({
      protein,
      sauce,
      accompaniment
    }, stockAvailability);
    
    if (allInStock) {
      score += 30;
    }
  }
  
  // Bonus pour √©quilibre nutritionnel
  const nutritionBalance = calculateNutritionBalance({
    protein,
    sauce,
    accompaniment
  });
  
  score += nutritionBalance * 10;
  
  // Bonus pour vari√©t√© (√©viter m√™me sauce/accompagnement que r√©cemment)
  const sauceVariety = checkSauceVariety(sauce, previousMenus);
  const accompanimentVariety = checkAccompanimentVariety(accompaniment, previousMenus);
  
  score += sauceVariety * 5;
  score += accompanimentVariety * 5;
  
  return score;
}
```

---

## üìê Structure de Donn√©es Exemple

### Exemple 1 : Cuisse de Poulet (Prot√©ine)

```javascript
{
  _id: ObjectId("..."),
  name: "Cuisse de poulet",
  type: "protein",
  proteinCategory: "volaille",
  ingredients: [
    { name: "Cuisse de poulet", quantity: 1, unit: "pi√®ce" },
    { name: "Huile d'olive", quantity: 1, unit: "c. √† soupe" },
    { name: "Sel", quantity: 1, unit: "pinc√©e" },
    { name: "Poivre", quantity: 1, unit: "pinc√©e" }
  ],
  preparationSteps: [
    "Pr√©chauffer le four √† 180¬∞C",
    "Badigeonner les cuisses d'huile d'olive",
    "Saler et poivrer",
    "Enfourner 45 minutes"
  ],
  compatibleWith: {
    sauces: [ObjectId("sauce-champignons"), ObjectId("sauce-tomate"), ObjectId("sauce-vin")],
    accompaniments: [ObjectId("riz"), ObjectId("frites"), ObjectId("legumes"), ObjectId("compote-pommes")]
  },
  allergens: [],
  dietaryRestrictions: ["halal"],
  nutrition: {
    calories: 250,
    proteins: 30,
    carbs: 0,
    lipids: 12,
    fibers: 0
  },
  preparationTime: 10,
  cookingTime: 45
}
```

### Exemple 2 : Sauce Champignons (Sauce)

```javascript
{
  _id: ObjectId("sauce-champignons"),
  name: "Sauce aux champignons",
  type: "sauce",
  ingredients: [
    { name: "Champignons", quantity: 150, unit: "g" },
    { name: "Cr√®me fra√Æche", quantity: 100, unit: "ml" },
    { name: "√âchalote", quantity: 1, unit: "pi√®ce" },
    { name: "Beurre", quantity: 20, unit: "g" },
    { name: "Vin blanc", quantity: 50, unit: "ml" }
  ],
  preparationSteps: [
    "√âmincer les champignons et l'√©chalote",
    "Faire revenir dans le beurre",
    "D√©glacer au vin blanc",
    "Ajouter la cr√®me et laisser r√©duire"
  ],
  compatibleWith: {
    proteins: [ObjectId("cuisse-poulet"), ObjectId("filet-poulet"), ObjectId("escalope-veau")]
  },
  allergens: ["lactose"],
  dietaryRestrictions: [],
  nutrition: {
    calories: 180,
    proteins: 3,
    carbs: 5,
    lipids: 15,
    fibers: 2
  },
  preparationTime: 5,
  cookingTime: 15
}
```

### Exemple 3 : Riz (Accompagnement)

```javascript
{
  _id: ObjectId("riz"),
  name: "Riz blanc",
  type: "accompaniment",
  ingredients: [
    { name: "Riz", quantity: 80, unit: "g" },
    { name: "Eau", quantity: 160, unit: "ml" },
    { name: "Sel", quantity: 1, unit: "pinc√©e" }
  ],
  preparationSteps: [
    "Rincer le riz",
    "Faire bouillir l'eau sal√©e",
    "Ajouter le riz et cuire 18 minutes",
    "Laisser reposer 5 minutes"
  ],
  compatibleWith: {
    proteins: [ObjectId("cuisse-poulet"), ObjectId("filet-poulet"), ObjectId("saumon"), ObjectId("tofu")]
  },
  allergens: [],
  dietaryRestrictions: ["sans_gluten", "vegetarien", "vegan"],
  nutrition: {
    calories: 130,
    proteins: 3,
    carbs: 28,
    lipids: 0,
    fibers: 0.5
  },
  preparationTime: 2,
  cookingTime: 18
}
```

### Exemple 4 : Compote de Pommes (Accompagnement)

```javascript
{
  _id: ObjectId("compote-pommes"),
  name: "Compote de pommes",
  type: "accompaniment",
  ingredients: [
    { name: "Pommes", quantity: 200, unit: "g" },
    { name: "Sucre", quantity: 20, unit: "g" },
    { name: "Cannelle", quantity: 1, unit: "pinc√©e" }
  ],
  preparationSteps: [
    "√âplucher et couper les pommes",
    "Cuire √† feu doux avec le sucre",
    "Ajouter la cannelle",
    "Mixer si n√©cessaire"
  ],
  compatibleWith: {
    proteins: [ObjectId("cuisse-poulet"), ObjectId("cote-porc"), ObjectId("saucisse")]
  },
  allergens: [],
  dietaryRestrictions: ["vegetarien", "vegan"],
  nutrition: {
    calories: 120,
    proteins: 0.5,
    carbs: 28,
    lipids: 0,
    fibers: 3
  },
  preparationTime: 10,
  cookingTime: 20
}
```

---

## ü§ñ Algorithme de G√©n√©ration IA

### √âtape 1 : S√©lection de la Prot√©ine

```javascript
async function selectProtein({ restrictions, allergens, avoid, useStockOnly }) {
  const query = {
    type: 'protein',
    // Exclure les allerg√®nes
    allergens: { $nin: allergens },
    // Compatible avec les restrictions
    $or: [
      { dietaryRestrictions: { $in: restrictions } },
      { dietaryRestrictions: { $size: 0 } } // Aucune restriction
    ]
  };
  
  // Exclure les prot√©ines r√©cemment utilis√©es
  if (avoid.length > 0) {
    query._id = { $nin: avoid };
  }
  
  // Filtrer par stock si demand√©
  if (useStockOnly) {
    const stockItems = await getStockItems();
    const availableProteins = await filterByStock(query, stockItems);
    return selectRandom(availableProteins);
  }
  
  const proteins = await RecipeComponent.find(query);
  return selectRandom(proteins);
}
```

### √âtape 2 : S√©lection des Composants Compatibles

```javascript
async function findCompatibleComponents({ type, proteinId, restrictions, allergens }) {
  // R√©cup√©rer la prot√©ine pour conna√Ætre ses compatibilit√©s
  const protein = await RecipeComponent.findById(proteinId);
  
  const query = {
    type: type,
    // Doit √™tre compatible avec la prot√©ine
    'compatibleWith.proteins': proteinId,
    // Exclure les allerg√®nes
    allergens: { $nin: allergens },
    // Compatible avec les restrictions
    $or: [
      { dietaryRestrictions: { $in: restrictions } },
      { dietaryRestrictions: { $size: 0 } }
    ]
  };
  
  return await RecipeComponent.find(query);
}
```

### √âtape 3 : Cr√©ation du Template Combin√©

```javascript
async function createRecipeTemplate({ protein, sauce, accompaniment, numberOfPeople }) {
  // Calculer les quantit√©s totales
  const totalIngredients = calculateTotalIngredients({
    protein,
    sauce,
    accompaniment,
    numberOfPeople
  });
  
  // Combiner les instructions
  const combinedInstructions = combineInstructions({
    protein,
    sauce,
    accompaniment
  });
  
  // Calculer la nutrition totale
  const totalNutrition = {
    calories: (protein.nutrition.calories || 0) + 
              (sauce?.nutrition.calories || 0) + 
              (accompaniment?.nutrition.calories || 0),
    proteins: (protein.nutrition.proteins || 0) + 
              (sauce?.nutrition.proteins || 0) + 
              (accompaniment?.nutrition.proteins || 0),
    // ... autres nutriments
  };
  
  // Combiner les allerg√®nes (union)
  const allAllergens = [
    ...(protein.allergens || []),
    ...(sauce?.allergens || []),
    ...(accompaniment?.allergens || [])
  ];
  const uniqueAllergens = [...new Set(allAllergens)];
  
  // G√©n√©rer le nom
  const name = generateRecipeName({ protein, sauce, accompaniment });
  
  // Cr√©er le template
  const template = new RecipeTemplate({
    name,
    protein: protein._id,
    sauce: sauce?._id,
    accompaniment: accompaniment?._id,
    combinedInstructions,
    totalNutrition,
    allergens: uniqueAllergens,
    isAutoGenerated: true
  });
  
  await template.save();
  return template;
}

function generateRecipeName({ protein, sauce, accompaniment }) {
  const parts = [protein.name];
  
  if (sauce) {
    parts.push(`avec ${sauce.name}`);
  }
  
  if (accompaniment) {
    parts.push(`et ${accompaniment.name}`);
  }
  
  return parts.join(' ');
}
```

---

## üé® Interface Utilisateur

### Vue de Gestion des Composants

```html
<div id="recipe-components-tab" class="tab-content">
  <div class="card">
    <h2><i class="fas fa-puzzle-piece"></i> Composants de Recettes</h2>
    
    <!-- Filtres par type -->
    <div class="component-filters">
      <button class="filter-btn active" data-type="all">Tous</button>
      <button class="filter-btn" data-type="protein">Prot√©ines</button>
      <button class="filter-btn" data-type="sauce">Sauces</button>
      <button class="filter-btn" data-type="accompaniment">Accompagnements</button>
    </div>
    
    <!-- Liste des composants -->
    <div class="components-grid">
      <!-- Composant -->
      <div class="component-card" data-type="protein">
        <h3>Cuisse de poulet</h3>
        <div class="component-compatibilities">
          <div class="compatible-sauces">
            <strong>Sauces compatibles :</strong>
            <span class="badge">Sauce champignons</span>
            <span class="badge">Sauce tomate</span>
            <span class="badge">Sauce au vin</span>
          </div>
          <div class="compatible-accompaniments">
            <strong>Accompagnements :</strong>
            <span class="badge">Riz</span>
            <span class="badge">Frites</span>
            <span class="badge">L√©gumes</span>
            <span class="badge">Compote de pommes</span>
          </div>
        </div>
        <div class="component-actions">
          <button class="btn-edit">‚úèÔ∏è √âditer</button>
          <button class="btn-delete">üóëÔ∏è Supprimer</button>
        </div>
      </div>
    </div>
    
    <!-- Bouton d'ajout -->
    <button id="add-component-btn" class="btn-primary">
      <i class="fas fa-plus"></i> Ajouter un composant
    </button>
  </div>
</div>
```

### Vue de G√©n√©ration Modulaire

```html
<div id="modular-generation-section">
  <h3>G√©n√©ration Modulaire de Menu</h3>
  
  <div class="generation-options">
    <!-- Option 1 : G√©n√©ration automatique -->
    <div class="option-card">
      <h4>ü§ñ G√©n√©ration Automatique</h4>
      <p>L'IA s√©lectionne automatiquement une combinaison optimale</p>
      <button onclick="generateModularMenu('auto')">G√©n√©rer</button>
    </div>
    
    <!-- Option 2 : S√©lection manuelle -->
    <div class="option-card">
      <h4>üë§ S√©lection Manuelle</h4>
      <p>Choisissez vous-m√™me les composants</p>
      
      <div class="component-selectors">
        <div class="selector">
          <label>Prot√©ine *</label>
          <select id="select-protein">
            <option value="">-- Choisir --</option>
            <!-- Charg√© dynamiquement -->
          </select>
        </div>
        
        <div class="selector">
          <label>Sauce (optionnel)</label>
          <select id="select-sauce" disabled>
            <option value="">-- Choisir une prot√©ine d'abord --</option>
          </select>
        </div>
        
        <div class="selector">
          <label>Accompagnement (optionnel)</label>
          <select id="select-accompaniment" disabled>
            <option value="">-- Choisir une prot√©ine d'abord --</option>
          </select>
        </div>
      </div>
      
      <button onclick="generateModularMenu('manual')" id="generate-manual-btn" disabled>
        G√©n√©rer le menu
      </button>
    </div>
  </div>
  
  <!-- R√©sultat -->
  <div id="modular-menu-result" style="display: none;">
    <div class="generated-menu-card">
      <h4 id="generated-menu-name">Cuisse de poulet avec sauce champignons et riz</h4>
      
      <div class="menu-components">
        <div class="component-section">
          <h5>Prot√©ine</h5>
          <div id="menu-protein-details"></div>
        </div>
        <div class="component-section">
          <h5>Sauce</h5>
          <div id="menu-sauce-details"></div>
        </div>
        <div class="component-section">
          <h5>Accompagnement</h5>
          <div id="menu-accompaniment-details"></div>
        </div>
      </div>
      
      <div class="menu-totals">
        <h5>Ingr√©dients totaux (pour X personnes)</h5>
        <ul id="total-ingredients-list"></ul>
      </div>
      
      <div class="menu-actions">
        <button onclick="acceptModularMenu()">‚úÖ Accepter</button>
        <button onclick="generateAlternative()">üîÑ Alternative</button>
      </div>
    </div>
  </div>
</div>
```

---

## üîß Impl√©mentation Backend

### Routes API

```javascript
// routes/recipeComponentRoutes.js

// Cr√©er un composant
router.post('/api/recipe-components', createComponent);

// Lister les composants
router.get('/api/recipe-components', getComponents);
router.get('/api/recipe-components/type/:type', getComponentsByType);

// R√©cup√©rer les compatibilit√©s
router.get('/api/recipe-components/:id/compatibilities', getCompatibilities);

// G√©n√©rer un menu modulaire
router.post('/api/menu/generate-modular', generateModularMenu);

// Cr√©er un template combin√©
router.post('/api/recipe-templates', createRecipeTemplate);
```

### Contr√¥leur

```javascript
// controllers/modularMenuController.js

export const generateModularMenu = asyncHandler(async (req, res) => {
  const {
    numberOfPeople,
    mealType,
    dietaryRestrictions = [],
    allergens = [],
    useStockOnly = false,
    proteinId = null, // Si s√©lection manuelle
    sauceId = null,
    accompanimentId = null,
    avoidProteins = []
  } = req.body;
  
  let protein, sauce, accompaniment;
  
  // Mode automatique ou manuel
  if (proteinId) {
    // Mode manuel : utiliser les IDs fournis
    protein = await RecipeComponent.findById(proteinId);
    if (!protein || protein.type !== 'protein') {
      throw new Error('Prot√©ine invalide');
    }
    
    if (sauceId) {
      sauce = await RecipeComponent.findById(sauceId);
      // V√©rifier la compatibilit√©
      if (!sauce.compatibleWith.proteins.includes(protein._id)) {
        throw new Error('Sauce non compatible avec cette prot√©ine');
      }
    }
    
    if (accompanimentId) {
      accompaniment = await RecipeComponent.findById(accompanimentId);
      if (!accompaniment.compatibleWith.proteins.includes(protein._id)) {
        throw new Error('Accompagnement non compatible avec cette prot√©ine');
      }
    }
  } else {
    // Mode automatique : s√©lectionner optimalement
    protein = await selectOptimalProtein({
      restrictions: dietaryRestrictions,
      allergens,
      avoid: avoidProteins,
      useStockOnly
    });
    
    const compatibleSauces = await findCompatibleComponents({
      type: 'sauce',
      proteinId: protein._id,
      restrictions: dietaryRestrictions,
      allergens
    });
    
    const compatibleAccompaniments = await findCompatibleComponents({
      type: 'accompaniment',
      proteinId: protein._id,
      restrictions: dietaryRestrictions,
      allergens
    });
    
    // S√©lectionner optimalement
    const combination = selectOptimalCombination({
      protein,
      sauces: compatibleSauces,
      accompaniments: compatibleAccompaniments,
      useStockOnly
    });
    
    sauce = combination.sauce;
    accompaniment = combination.accompaniment;
  }
  
  // Cr√©er le template
  const template = await createRecipeTemplate({
    protein,
    sauce,
    accompaniment,
    numberOfPeople
  });
  
  // V√©rifier le stock si demand√©
  let stockCheck = null;
  if (useStockOnly) {
    stockCheck = await checkStockAvailability(template, numberOfPeople);
  }
  
  res.json({
    success: true,
    template: await template.populate(['protein', 'sauce', 'accompaniment']),
    stockCheck
  });
});
```

---

## üìä Avantages de cette Approche

### 1. **Multiplication des Variantes**
- **1 prot√©ine** √ó **3 sauces** √ó **4 accompagnements** = **12 menus diff√©rents**
- Exemple : Cuisse de poulet peut donner 12 variantes

### 2. **R√©duction du Gaspillage**
- Acheter en gros un ingr√©dient principal
- Le d√©cliner de multiples fa√ßons
- Optimiser les achats

### 3. **Flexibilit√©**
- Adapter rapidement selon le stock disponible
- Cr√©er des menus sur-mesure selon les restrictions
- Varier facilement pour √©viter la monotonie

### 4. **Optimisation IA**
- L'IA peut s√©lectionner les meilleures combinaisons
- √âviter les r√©p√©titions r√©centes
- Maximiser l'utilisation du stock

### 5. **Maintenance Simplifi√©e**
- Modifier un composant (ex. sauce) ‚Üí toutes les recettes utilisant cette sauce sont mises √† jour
- Ajouter une nouvelle sauce ‚Üí nouvelles combinaisons automatiques

---

## üöÄ Plan d'Impl√©mentation

### Phase 1 : Mod√®les de Donn√©es
- [ ] Cr√©er le mod√®le `RecipeComponent`
- [ ] Cr√©er le mod√®le `RecipeTemplate`
- [ ] Migrer les recettes existantes en composants (optionnel)

### Phase 2 : Backend
- [ ] Routes API pour composants
- [ ] Routes API pour templates
- [ ] Route de g√©n√©ration modulaire
- [ ] Algorithmes de s√©lection et combinaison

### Phase 3 : Frontend
- [ ] Interface de gestion des composants
- [ ] Interface de g√©n√©ration modulaire
- [ ] Affichage des menus combin√©s
- [ ] Gestion des compatibilit√©s

### Phase 4 : Int√©gration
- [ ] Int√©grer avec le g√©n√©rateur IA existant
- [ ] Int√©grer avec la gestion de stock
- [ ] Int√©grer avec la planification

---

## üí° Exemples d'Utilisation

### Sc√©nario 1 : Optimisation du Stock

**Situation** : Achat de 50 cuisses de poulet

**G√©n√©ration automatique sur 5 jours** :
- Jour 1 : Cuisse + Sauce champignons + Riz
- Jour 2 : Cuisse + Sauce tomate + L√©gumes
- Jour 3 : Cuisse + Compote de pommes + Frites
- Jour 4 : Cuisse + Sauce au vin + Pur√©e
- Jour 5 : Cuisse + Sauce moutarde + P√¢tes

**R√©sultat** : 5 menus vari√©s avec le m√™me ingr√©dient principal

### Sc√©nario 2 : Restrictions Multiples

**Clients** :
- Client 1 : Sans gluten
- Client 2 : V√©g√©tarien
- Client 3 : Sans lactose

**G√©n√©ration** :
- Prot√©ine : Tofu (v√©g√©tarien, sans gluten, sans lactose)
- Sauce : Sauce tomate (sans gluten, sans lactose)
- Accompagnement : Riz (sans gluten, v√©g√©tarien)

**R√©sultat** : Menu compatible avec toutes les restrictions

---

## üéØ Conclusion

Cette approche modulaire permet de :
- ‚úÖ **Multiplier les variantes** autour d'un m√™me ingr√©dient
- ‚úÖ **R√©duire le gaspillage** et optimiser les achats
- ‚úÖ **Augmenter la flexibilit√©** dans la planification
- ‚úÖ **Simplifier la maintenance** des recettes
- ‚úÖ **Am√©liorer l'optimisation IA** des menus

C'est une √©volution naturelle vers un syst√®me plus intelligent et flexible de g√©n√©ration de menus.





